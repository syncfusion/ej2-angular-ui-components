this.ej=this.ej||{},this.ej.angularbase=function(e,t,n){"use strict";function i(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){e.prototype.hasOwnProperty(n)&&!t.isFormBase||(e.prototype[n]=t.prototype[n])})})}function s(e){return function(t){i(t,e)}}function r(e,t,i){var s={};if(e&&e.length){for(var r=0,a=e;r<a.length;r++){var o=a[r];!0===i?(t.propCollection[o]=new n.EventEmitter(!1),t[o]=t.propCollection[o]):s[o]=new n.EventEmitter(!1)}!0!==i&&t.setProperties(s,!0)}}function a(e,t,n){var i=Object.keys(e.registeredTemplate);if(i.length)for(var s=t&&t.filter(function(e){return!/\./g.test(e)}),r=0,a=s&&s||i;r<a.length;r++){var o=a[r];if(n&&n.length)for(var l=0;l<n.length;l++)for(g=0;g<e.registeredTemplate.template.length;g++)e.registeredTemplate.template[g].rootNodes[0]===n[l]&&(c=e.registeredTemplate[o])[g].destroy();else for(var h=0,p=e.registeredTemplate[o];h<p.length;h++){var c=p[h];if(!c.destroyed){if(c._view)for(var u=c._view.renderer.parentNode(c.rootNodes[0]),g=0;g<c.rootNodes.length;g++)u.appendChild(c.rootNodes[g]);c.destroy()}}delete e.registeredTemplate[o]}for(var f=0,d=e.tagObjects;f<d.length;f++)!function(e){e.instance&&e.instance.clearTemplate(t&&t.filter(function(t){return!!new RegExp(e.name).test(t)}))}(d[f])}function o(e,t,n){for(var i=e.replace(/\[/g,".").replace(/\]/g,"").split("."),s=n||{},r=0;r<i.length;r++){var a=i[r];r+1===i.length?s[a]=void 0===t?{}:t:void 0===s[a]&&(s[a]={}),s=s[a]}return s}function l(e,n){if("string"==typeof e)return v(e,n);var i=e.elementRef.nativeElement._viewContainerRef,s=e.elementRef.nativeElement.propName;return function(n,r,a){var o={$implicit:n},l=i||r.viewContainerRef,h=l.createEmbeddedView(e,o);h.markForCheck();var p=r?r.registeredTemplate:t.getValue("currentInstance.registeredTemplate",l);return a=a||s,void 0===p[a]&&(p[a]=[]),p[a].push(h),h.rootNodes}}function h(e){return function(t,n){var i={set:p(n),get:c(n,e),enumerable:!0,configurable:!0};Object.defineProperty(t,n,i)}}function p(e){return function(n){void 0!==n&&(t.setValue(e+"Ref",n,this),"string"!=typeof n?(n.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,n.elementRef.nativeElement.propName=e):this.saveChanges&&(this.saveChanges(e,n,void 0),this.dataBind()))}}function c(e,n){return function(){return t.getValue(e+"Ref",this)||n}}var u=function(){function e(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return e.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,n=this.tags;e<n.length;e++){var i=n[e],s=t.getValue("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);s&&this.tagObjects.push({instance:s,name:i})}for(var r=Object.keys(this),a=0,o=r=r.filter(function(e){return/Ref$/i.test(e)});a<o.length;a++){var l=o[a].replace("Ref","");t.setValue(l.replace("_","."),t.getValue(l,this),this.propCollection)}var h=Object.keys(this);if(this.directivePropList){for(var p=0;p<this.directivePropList.length;p++){var c=this.directivePropList[p];-1!==h.indexOf(c)&&t.setValue(c,t.getValue(c,this),this.propCollection)}this.hasChanges=!0}},e.prototype.registerEvents=function(e){r(e,this,!0)},e.prototype.ngOnChanges=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t],s=e[i];this.propCollection[i]=s.currentValue}this.isUpdated=!1,this.hasChanges=!0},e.prototype.clearTemplate=function(e){a(this,e)},e.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var n=t[e];this.propCollection[n.name]=n.instance.getProperties()}return this.propCollection},e.prototype.isChanged=function(){for(var e=this.hasChanges,t=0,n=this.tagObjects;t<n.length;t++){var i=n[t];e=e||i.instance.hasChanges}return e},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=Object.keys(this),n=0,i=e=e.filter(function(e){return/Ref$/i.test(e)});n<i.length;n++){var s=i[n].replace("Ref","");t.setValue(s.replace("_","."),t.getValue(s,this),this.propCollection)}},e.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},e}(),g=function(){function e(e){this.list=[],this.hasChanges=!1,this.propertyName=e}return e.prototype.ngOnInit=function(){this.isInitChanges=!0},e.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map(function(n){return n.index=t++,n.property=e.propertyName,n}),this.hasChanges=!0},e.prototype.getProperties=function(){for(var e=[],t=0,n=this.list;t<n.length;t++){var i=n[t];e.push(i.getProperties())}return e},e.prototype.isChanged=function(){var e=this,t=!1,n=0,i=!1,s=this.children.map(function(e){return e});if(this.list.length===this.children.length)for(var r=0;r<this.list.length;r++)if(this.list[r].propCollection.dataSource)this.list[r].dataSource&&this.list[r].propCollection.dataSource!==this.list[r].dataSource&&(this.list[r].propCollection.dataSource=this.list[r].dataSource,this.list[r].hasChanges=!0),i=JSON.stringify(this.list[r].propCollection.dataSource)!==JSON.stringify(s[r].propCollection.dataSource);else for(var a=Object.keys(this.list[r].propCollection),o=0;o<a.length;o++)if(this.list[r].propCollection[a[o]]&&"TemplateRef_"===this.list[r].propCollection[a[o]].constructor.name){i=!0;break}this.hasNewChildren=!(this.list.length===this.children.length&&!i)||null,this.hasNewChildren&&(this.list=this.children.map(function(t){return t.index=n++,t.property=e.propertyName,t}));for(var l=0,h=this.list;l<h.length;l++){var p=h[l];t=t||p.hasChanges}return!!this.list.length&&t},e.prototype.clearTemplate=function(e){for(var t=this,n=0,i=this.list;n<i.length;n++)i[n].clearTemplate(e&&e.map(function(e){return new RegExp(t.propertyName).test(e)?e.replace(t.propertyName+".",""):e}))},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)this.list[e].isUpdated=!0},e.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},e}(),f=function(){function e(){this.isProtectedOnChange=!0}return e.prototype.saveChanges=function(e,t,n){if(!this.isProtectedOnChange){this.oldProperties[e]=n,this.changedProperties[e]=t,this.finalUpdate();var i=setTimeout(this.dataBind.bind(this)),s=function(){clearTimeout(i)};this.finalUpdate=s}},e.prototype.ngOnInit=function(e){var n=e||this;n.registeredTemplate={},n.ngBoundedEvents={},n.isAngular=!0,e&&(this.tags=e.tags),n.tags=this.tags||[],n.complexTemplate=this.complexTemplate||[],n.tagObjects=[],n.ngAttr=this.getAngularAttr(n.element),n.createElement=function(e,i){var s=n.srenderer?n.srenderer.createElement(e):t.createElement(e);return void 0===i?s:(s.innerHTML=i.innerHTML?i.innerHTML:"",void 0!==i.className&&(s.className=i.className),void 0!==i.id&&(s.id=i.id),void 0!==i.styles&&s.setAttribute("style",i.styles),void 0!==n.ngAttr&&s.setAttribute(n.ngAttr,""),void 0!==i.attrs&&t.attributes(s,i.attrs),s)};for(var i=0,s=n.tags;i<s.length;i++){var r=s[i],a={instance:t.getValue("child"+r.substring(0,1).toUpperCase()+r.substring(1),n),name:r};n.tagObjects.push(a)}for(var o=Object.keys(n),l=0,h=o=o.filter(function(e){return/Ref$/i.test(e)&&/\_/i.test(e)});l<h.length;l++){var p=h[l].replace("Ref",""),c={};t.setValue(p.replace("_","."),t.getValue(p,n),c),n.setProperties(c,!0)}},e.prototype.getAngularAttr=function(e){for(var t,n=e.attributes,i=n.length,s=0;s<i;s++)/_ngcontent/g.test(n[s].name)&&(t=n[s].name);return t},e.prototype.ngAfterViewInit=function(e){var n=e||this;/ejs-tab|ejs-accordion/g.test(n.ngEle.nativeElement.outerHTML)&&(n.ngEle.nativeElement.style.visibility="hidden");for(var i=Object.keys(n),s=0,r=i=i.filter(function(e){return/Ref$/i.test(e)});s<r.length;s++){var a=r[s].replace("Ref","");t.setValue(a.replace("_","."),t.getValue(a+"Ref",n),n)}setTimeout(function(){"undefined"!=typeof window&&(n.appendTo(n.element),n.ngEle.nativeElement.style.visibility="")})},e.prototype.ngOnDestroy=function(e){var t=e||this;"undefined"!=typeof window&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null))},e.prototype.clearTemplate=function(e,t){a(this,e,t)},e.prototype.ngAfterContentChecked=function(e){for(var n=e||this,i=0,s=n.tagObjects;i<s.length;i++){var r=s[i];if(!t.isUndefined(r.instance)&&(r.instance.isInitChanges||r.instance.hasChanges||r.instance.hasNewChildren))if(r.instance.isInitChanges){var a={},o=void 0;(E=t.getValue("instance.list",r))&&E.length&&(o=E[0].directivePropList);var l=!0;if(n.getModuleName&&"gantt"===n.getModuleName()&&(l=!1),o&&l&&-1===o.indexOf(r.instance.propertyName))for(var h=Object.keys(r.instance.list[0].propCollection),p=0;p<r.instance.list.length;p++){r.instance.list[p].propCollection[r.instance.propertyName]=[];for(var c={},u=0;u<h.length;u++){var g=h[u];c[g]=r.instance.list[p].propCollection[g]}for(var f=0;f<r.instance.list[p].tags.length;f++){var d=r.instance.list[p].tags[f],v=t.getValue("child"+d.substring(0,1).toUpperCase()+d.substring(1),r.instance.list[p]);if(v){var m=r.instance.list[p]["child"+d.substring(0,1).toUpperCase()+d.substring(1)];if(m)for(var C=0;C<m.list.length;C++){var y=m.list[0].tags[0];if(y){var b=t.getValue("child"+y.substring(0,1).toUpperCase()+y.substring(1),m.list[C]);m.list[C].tagObjects.push({instance:b,name:y})}}r.instance.list[p].tagObjects.push({instance:v,name:d})}}r.instance.list[p].propCollection[r.instance.propertyName].push(c)}a[r.name]=r.instance.getProperties(),n.setProperties(a,r.instance.isInitChanges)}else{n[r.name].length!==r.instance.list.length&&r.instance.list[0].hasChanges&&(n[r.name]=r.instance.list);for(var O=0,V=r.instance.list;O<V.length;O++){var E=V[O];if(E.hasChanges){var T=r.instance.list.indexOf(E),j=t.getValue(r.name,n)[T];void 0!==j&&void 0!==j.setProperties&&j.setProperties(E.getProperties()),E.isUpdated=!0}}}}},e.prototype.registerEvents=function(e){r(e,this)},e.prototype.twoWaySetter=function(e,n){var i=t.getValue(n,this.properties);i!==e&&(this.saveChanges(n,e,i),t.setValue(n,t.isNullOrUndefined(e)?null:e,this.properties),t.getValue(n+"Change",this).emit(e))},e.prototype.addTwoWay=function(e){for(var i=this,s=this,r=0,a=e;r<a.length;r++)!function(e){t.getValue(e,s),Object.defineProperty(s,e,{get:function(){return t.getValue(e,i.properties)},set:function(t){return i.twoWaySetter(t,e)}}),t.setValue(e+"Change",new n.EventEmitter,s)}(a[r])},e.prototype.addEventListener=function(e,n){var i=t.getValue(e,this);t.isUndefined(i)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(n,i.subscribe(n)))},e.prototype.removeEventListener=function(e,n){var i=t.getValue(e,this);t.isUndefined(i)||this.ngBoundedEvents[e].get(n).unsubscribe()},e.prototype.trigger=function(e,n,i){var s=t.getValue(e,this),r=this.isProtectedOnChange;this.isProtectedOnChange=!1,n&&(n.name=e),t.isUndefined(s)||s.next(n);var a=t.getValue("local"+e.charAt(0).toUpperCase()+e.slice(1),this);t.isUndefined(a)||a.call(this,n),this.isProtectedOnChange=r,i&&i.call(this,n)},e}(),d=function(){function e(){}return e.prototype.propagateChange=function(e){},e.prototype.propagateTouch=function(){},e.prototype.localChange=function(e){var n=void 0===e.checked?e.value:e.checked;if(this.objCheck=t.isObject(n),!0===this.objCheck)this.duplicateValue=JSON.stringify(n),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==n&&(this.propagateChange(n),this.angularValue=n);else if(n!==this.angularValue&&void 0!==this.propagateChange&&void 0!==n)if(""!==n&&null!==n)this.propagateChange(n),this.angularValue=n;else{var i=n;this.propagateChange(i),this.angularValue=n}},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){this.propagateTouch=e},e.prototype.twoWaySetter=function(e,n){var i=t.getValue(n,this.properties),s=this.inputElement||this.element;(i!==e||void 0!==s.value&&""!==s.value)&&(this.saveChanges(n,e,i),t.setValue(n,t.isNullOrUndefined(e)?null:e,this.properties),t.getValue(n+"Change",this).emit(e))},e.prototype.ngAfterViewInit=function(e){var t=e||this;if("undefined"!=typeof window){t.appendTo(t.element);var n=t.inputElement||t.element;n.addEventListener("focus",t.ngOnFocus.bind(t)),n.addEventListener("blur",t.ngOnBlur.bind(t))}},e.prototype.setDisabledState=function(e){this.enabled=!e,this.disabled=e},e.prototype.writeValue=function(e){var t=/ejs-radiobutton/g;void 0===this.checked?this.value=e:"boolean"==typeof e?this.ngEle&&t.test(this.ngEle.nativeElement.outerHTML)?this.checked=e===this.value:this.checked=e:this.checked=e===this.value,null!==e&&(this.angularValue=e,this.preventChange=!0)},e.prototype.ngOnFocus=function(e){!0!==this.skipFromEvent&&this.focus.emit(e)},e.prototype.ngOnBlur=function(e){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(e)},e.isFormBase=!0,e}(),v=t.getTemplateEngine();return t.setTemplateEngine({compile:l}),e.ComplexBase=u,e.ArrayBase=g,e.ComponentBase=f,e.FormBase=d,e.applyMixins=i,e.ComponentMixins=s,e.registerEvents=r,e.clearTemplate=a,e.setValue=o,e.compile=l,e.Template=h,e}({},ej.base,core),this.ejs=ej;
//# sourceMappingURL=ej2-angular-base.min.js.map
